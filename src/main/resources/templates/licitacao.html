<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
	xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	layout:decorator="@{~/base/layout}">
<head>
<title th:text="#{messages.licitacao}"></title>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

<link rel="stylesheet" th:href="@{/css/home/home.css}" />
<link rel="stylesheet" th:href="@{/css/editais/licitacao.css}" />
<script type="text/javascript" th:src="@{/js/editais/licitacao.js}"></script>
<script type="text/javascript" th:src="@{/js/CSVGenerator.js}"></script>
<script type="text/javascript" th:src="@{/js/FileSaver.js}"></script>
<script type="text/javascript" th:src="@{/js/html-docx.js}"></script>
<script type="text/javascript" th:src="@{/js/jspdf.debug.js}"></script>
<script type="text/javascript" th:src="@{/js/html2pdf.js}"></script>
<script type="text/javascript" th:src="@{/js/jspdf.plugin.autotable.js}"></script>
</head>
<body>
	<section layout:fragment="content">
		<div class="loader center">
			<div id="loading" class="modal center hide no-overflow-y">
				<div class="preloader-wrapper big active center">
				    <div class="spinner-layer spinner-blue-only ">
				      <div class="circle-clipper left">
				        <div class="circle"></div>
				      </div><div class="gap-patch">
				        <div class="circle"></div>
				      </div><div class="circle-clipper right">
				        <div class="circle"></div>
				      </div>
				    </div>
				  </div>
				<!-- <img class="center" src="/img/loading.gif"/> -->
  			</div>
		</div>
		<div>
		
		<!-- BREADCRUMB -->
			 <nav class="breadcrumb-line">
			    <div class="nav-wrapper green darken-3">
			      <div class="col s12 page-align">
			        <a 	th:href="@{/home}" class="breadcrumb white-text" th:text="#{messages.home.caminhopao}"></a>
			        <a th:href="@{/editais/licitacao}" class="breadcrumb white-text" th:text="#{messages.licitacao.caminhopao}"></a>
			      </div>
			    </div>
			  </nav>

			<div class="row">
			
				<div class="col s12  mb10 mt5">
						<ul class="right">
							<li class="fl ml15  valign-wrapper">
								<i class="material-icons">print</i>&nbsp;&nbsp;IMPRIMIR: 
							</li>
						
							<li class="fl ml15">
								<a href="#" class="valign-wrapper mover" onclick="createPDFFile(getData())"><i class="material-icons">library_books</i>&nbsp;PDF</a>
							</li>
							<li class="fl ml15 valign-wrapper">
								<a href="#" class="valign-wrapper mover" onclick="createDocFile()"><i class="material-icons">library_books</i>&nbsp;DOC</a>
							</li>
							<li class="fl ml15 valign-wrapper">
								<a href="#" class="valign-wrapper mover" id="exportCSV" onclick="createCSVFile()"><i class="material-icons">library_books</i>&nbsp;CSV</a>
							</li>
						</ul>
				</div>
				
			  <div class="chip red lighten-4 red-text text-accent-4 ml20 mb20">
			    Para efetuar uma consulta, favor selecione um orgão.
			  </div>
        
				<form class="col s12" 
						id="licitacao-form"
						th:object="${licitacao}" >
					
					<div class="row">
					
						<div class="input-field col xl6 l6">
							<div class="relative col xl12 l12 pl0">
								<label th:text="#{messages.licitacao.orgaos}"></label>
								<span class="caret">▼</span>
								<input th:name="orgaoVO" class="select-dropdown mb0" readonly="true" id="orgao-selector" selected-Id="" value="Escolha um orgão" type="text" onclick="openList('select1')"/>
								<div class='absolute option-drop z-depth-2 pl0 pr0 row col xl12 l12' onmouseleave="hideElement('select1');">
									 <ul  id="select1" class="hidden pl0 pr0 col xl12 l12">
										<li th:each="orgao : ${orgaos}" th:id="'orgao' + ${orgao.id}" th:value="${orgao.id}" 
											th:text="${orgao.orgao}" 
											onclick="chooseElement($(this).text(), $(this).attr('value'), 'select1', 'orgao-selector');" 
											class="option-hover">
										</li>
									</ul>
								</div>
							</div>
						</div>

						<div class=" input-field col s3">
							<label th:text="#{messages.licitacao.dots.data.inicial}"></label> 
							<input type="text" class="datepicker" id="data-inicial" th:name="dataInicialVO"/>
						</div>

						<div class="input-field col s3">
							<label th:text="#{messages.licitacao.dots.data.final}" ></label> 
							<input type="text" class="datepicker" id="data-final" th:name="dataFinalVO" />
						</div>

					</div>

					<div class="row">

						<div class="input-field col s2">
							<input placeholder="CNPJ" id="cnpj-licitacao" form="licitacao-form" type="text" class="validate"  th:name="cnpjVO" /> 
							<label for="cnpj-licitacao" th:text="#{messages.licitacao.cpf.cnpj}"></label>
						</div>

						<div class="input-field col s4">
							<input placeholder="Razão Social" id="fornecedor-licitacao" th:name="fornecedorVO" type="text" class="validate" /> 
							<label for="fornecedor-licitacao" th:text="#{messages.licitacao.fornecedor}"></label>
						</div>

						<div class="input-field col xl6 l6">
							<div class="relative col xl12 l12 pl0">
								<label th:text="#{messages.licitacao.dot.modalidade}"></label>
								<span class="caret">▼</span>
								<input class="select-dropdown mb0" readonly="true" id="modalidade-selector" selected-Id="" value="Escolha uma modalidade" type="text" onclick="openList('modalidade-options')"/>
								<div class='absolute option-drop z-depth-2 pl0 pr0 row col xl12 l12' onmouseleave="hideElement('modalidade-options');">
									 <ul th:name="idModalidade" id="modalidade-options" class="hidden pl0 pr0 col xl12 l12 option-overflow">
										<li th:each="modalidade : ${modalidades}" th:id="${modalidade.id}" th:value="${modalidade.id}" 
											th:text="${modalidade.modalidade}" 
											onclick="chooseElement($(this).text(), $(this).attr('value'), 'modalidade-options', 'modalidade-selector');" 
											class="option-hover">
										</li>
									</ul>
								</div>
							</div>
						</div>
						
					</div>

					<div class="row">
						<div class="input-field col s12">
							<input type="text" form="licitacao-form" placeholder="Digite parte do objeto da licitação desejada" th:name="objeto" maxlength="5000" id="objeto-licitacao" class="validate uppercase" /> 
								<label for="objeto-licitacao" th:text="#{messages.licitacao.objeto.dots}"></label>
								
						</div>
					</div>
					
					<div class="row center-align">
						<a class="waves-effect waves-green btn transparent green-text text-darken-3 z-depth-3 btn-floating" onclick="refresh()">
							<i class=" green-text material-icons left">refresh</i>
						</a>
						<button class="waves-effect waves-light btn green darken-3 z-depth-3 btn-floating ml15" type="submit">
							<i class="white-text material-icons left">search</i>
						</button>
						
					</div>
					
				</form>
				 
			</div>

		</div>
	<div >


<ul class="collapsible" data-collapsible="accordion" id="licitacao-accordion">
   
</ul>
  
		
	<div id="notFound" class="center-align display-transition mb20 mt20">
		<img class="responsive-img center not-found" th:src="@{/img/no-results.png}"/>
		<div class="valign-wrapper center">
			<i class="small material-icons prefix red-text darken-2"> warning</i>
			<span class="not-found-message mb0 center-align">Não Existe nada Aqui!</span><br/>
		</div>
		<label class="not-found-subtitle">Não conseguimos encontrar nada para sua busca. Mude os filtros e tente novamente.</label>
	</div>
		
	</div>
	
	<div id="printPDF" class="hide docFile">	
		<table  class="highlight bordered table-licitacoes fileTable">
			<thead>
				<tr>
					<th class="th" th:text="#{messages.licitacao.nprocesso}"></th>
					<th class="th" th:text="#{messages.licitacao.edital}"></th>
					<th class="th" th:text="#{messages.licitacao.dt.abertura}"></th>
					<th class="th" th:text="#{messages.licitacao.modalidade}"></th>
					<th class="th" th:text="#{messages.licitacao.objeto}"></th>
					<th class="th" th:text="#{messages.licitacao.situacao}"></th>
					<th class="th" th:text="#{messages.licitacao.valor}"></th>
				</tr>
			</thead>

			<tbody id="detailBody">
				<tr class="tr-conf tr"  th:each="lic : ${licitacao}">
					<td th:text="${lic.processo}" class="bold td"></td>
					<td th:text="${lic.edital}" class="td"></td>
					<td th:text="${lic.dataAbertura}" class="td"></td>
					<td th:text="${lic.modalidade.modalidade}" class="td"></td>
					<td th:text="${lic.objeto}" class="td"></td>
					<td th:text="${lic.situacao.descricao}" class="td"></td>
					<td th:text="'R$ ' + ${lic.valor}" class="td"></td>
				</tr>
			</tbody>
			
		</table>
		</div>
		
	<script th:inline="javascript">
		
		function getData(){
				return = [[${licitacao}]];
				
			 //return 
		}
		
	</script>
	
	<a id="pageup" class="btn-large btn-floating pulse hide right grey lighten-5 mr40 btn-swing" onclick="moveToTop(), hideBtn('pageup');"><i class="green-text text-darken-3 material-icons ">arrow_upward</i></a>
		
	</section>

</body>
</html>